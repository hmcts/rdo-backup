trigger:
- master
- dev

pr:
- master

pool:
    name: rdo-backup-prod
    vmImage: Ubuntu-18.04

steps:
- task: CopyFiles@1
  displayName: Copy Python files
  inputs:
    contents: '**'
    TargetFolder: $(Build.ArtifactStagingDirectory)
    cleanTargetFolder: true

- task: PythonScript@0
  displayName: Execute Python script
  inputs:
    scriptSource: 'filePath'
    scriptPath: f5_backup.py
    arguments: --KEY_VAULT_NAME $(KEY_VAULT_NAME) --AZURE_TENANT_ID $(AZURE_TENANT_ID) --AZURE_CLIENT_ID $(AZURE_CLIENT_ID) --AZURE_CLIENT_SECRET $(AZURE_CLIENT_SECRET)
    workingDirectory: $(Build.ArtifactStagingDirectory)